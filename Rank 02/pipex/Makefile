# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: dvan-hem <dvan-hem@student.s19.be>         +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2025/03/17 15:04:51 by dvan-hem          #+#    #+#              #
#    Updated: 2025/07/29 19:38:20 by dvan-hem         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

NAME 		= pipex

CC 			= cc
CFLAGS 		= -Wall -Wextra -Werror -g
rm			= rm -f

LIBFT		= ./libft/libft.a
LIBFT_DIR	= ./libft/
SRC_DIR 	= srcs/
OBJS 		= $(SRCS:.c=.o)
INC_DIR		= includes/

INC			= -I $(INC_DIR) -I $(LIBFT_DIR)

SRCS		= $(SRC_DIR)pipex.c $(SRC_DIR)utils.c $(SRC_DIR)path.c 

start:
			@make all --no-print-directory
$(LIBFT):
			@make -C $(LIBFT_DIR) --no-print-directory --silent

all: 		logo $(NAME)

logo:
	@tput civis
	@printf "\033[38;2;241;178;172m"; \
	for c in "👻" " " "L" "e" "t" "'" "s" " " "g" "e" "t" " " "s" "t" "a" "r" "t" "e" "d" " " "👻"; do \
		printf "$$c"; \
		sleep 0.05; \
	done; \
	printf "\n\n"; \
	{ \
	echo "\033[38;2;162;156;187m      :::::::::    :::    :::::::::    ::::::::: :::    :::"; \
	echo "\033[38;2;125;120;163m     :+:    :+:   :+:    :+:    :+:   :+:         :+:  :+:"; \
	echo "\033[38;2;162;156;187m    +:+    +:+   +:+    +:+    +:+   +:+           +:++:+"; \
	echo "\033[38;2;125;120;163m   +#++:++#+    +#+    +#++:++#+    +#++:++#+       #+#+"; \
	echo "\033[38;2;162;156;187m  +#+          +#+    +#+          +#+              #+#++"; \
	echo "\033[38;2;125;120;163m #+#          #+#    #+#          +#+              #+# #+#"; \
	echo "\033[38;2;162;156;187m###          ###    ###          #########        ###   ###"; \
	} | while IFS= read -r line; do \
		printf "$$line\n"; \
		sleep 0.02; \
	done; \
	printf "\033[0m\n"; \
	tput cnorm

progress_bar:
	@tput civis
	@printf "\n\033[38;2;241;178;172m╭────────────────────────────────────────────╮\n"
	@printf " \033[38;2;241;178;172m│\033[38;2;125;120;163m"
	@i=0; \
	while [ $$i -le 40 ]; do \
		sleep 0.01; \
		printf "█"; \
		i=$$((i + 1)); \
	done; \
	printf "\033[38;2;241;178;172m│\n"; \
	printf "╰────────────────────────────────────────────╯\033[0m\n"; \
	tput cnorm

$(NAME): $(OBJS) $(LIBFT)
	@$(CC) $(CFLAGS) $(OBJS) $(LIBFT) -o $(NAME) $(INC)
	@$(MAKE) progress_bar --no-print-directory

%.o: %.c
	@$(CC) $(CFLAGS) -c $< -o $@ $(INC)

clean:
	@tput civis; \
	printf "\033[38;2;241;178;172m"; \
	for c in "🧹" " " "C" "l" "e" "a" "n" "i" "n" "g" " " "🧹"; do \
		printf "$$c"; \
		sleep 0.03; \
	done; \
	\
	printf "\n\n\033[38;2;241;178;172m╭────────────────────────────────────────────╮\n"; \
	printf " \033[38;2;241;178;172m│\033[38;2;125;120;163m"; \
	i=0; \
	while [ $$i -le 40 ]; do \
		sleep 0.01; \
		printf "█"; \
		i=$$((i + 1)); \
	done; \
	printf "\033[38;2;241;178;172m│\n"; \
	printf "╰────────────────────────────────────────────╯\033[0m\n"; \
	tput cnorm
	@$(RM) $(OBJS)
	@make clean -C ./libft --no-print-directory > /dev/null

fclean:
	@tput civis; \
	printf "\033[38;2;241;178;172m"; \
	for c in "🧹" " " "F" "u" "l" "l" "y" " " "c" "l" "e" "a" "n" "i" "n" "g" " " "🧹"; do \
		printf "$$c"; \
		sleep 0.03; \
	done; \
	\
	printf "\n\n\033[38;2;241;178;172m╭────────────────────────────────────────────╮\n"; \
	printf " \033[38;2;241;178;172m│\033[38;2;125;120;163m"; \
	i=0; \
	while [ $$i -le 40 ]; do \
		sleep 0.01; \
		printf "█"; \
		i=$$((i + 1)); \
	done; \
	printf "\033[38;2;241;178;172m│\n"; \
	printf "╰────────────────────────────────────────────╯\033[0m\n"; \
	printf "\n\n\033[38;2;241;178;172m"; \
	for c in "✅" " " "D" "o" "n" "e" " " "✅"; do \
		printf "$$c"; \
		sleep 0.08; \
	done; \
	printf "\n"; \
	tput cnorm
	@$(RM) $(OBJS)
	@$(RM) $(NAME)
	@$(RM) $(LIBFT)
	@make fclean -C ./libft --no-print-directory > /dev/null

re:
	@tput civis; \
	printf "\033[38;2;241;178;172m"; \
	for c in "🔁" " " "R" "e" "-" "M" "a" "k" "i" "n" "g" "." "." "."; do \
		printf "$$c"; \
		sleep 0.03; \
	done; \
	\
	printf "\n\n\033[38;2;241;178;172m╭────────────────────────────────────────────╮\n"; \
	printf " \033[38;2;241;178;172m│\033[38;2;125;120;163m"; \
	i=0; \
	while [ $$i -le 40 ]; do \
		sleep 0.01; \
		printf "█"; \
		i=$$((i + 1)); \
	done; \
	printf "\033[38;2;241;178;172m│\n"; \
	printf "╰────────────────────────────────────────────╯\033[0m\n"; \
	tput cnorm
	@$(MAKE) fclean --no-print-directory
	@$(MAKE) all --no-print-directory

.PHONY: 	all clean fclean re